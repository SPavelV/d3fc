<!doctype html>
<html>
  <head>
    <style>
      g.annotation-band>path {
        fill-opacity: 0.1;
      }

      g.annotation-band:nth-child(4n)>path {
        fill: #c60;
      }

      g.annotation-band:nth-child(4n+1)>path {
        fill: #06c;
      }

      g.annotation-band:nth-child(4n+2)>path {
        fill: #60c;
      }

      g.annotation-band:nth-child(4n+3)>path {
        fill: #0c0;
      }
    </style>
  </html>
  <body>
    <svg width="640" height="480"></svg>

    <script src="../node_modules/d3-array/build/d3-array.js"></script>
    <script src="../node_modules/d3-collection/build/d3-collection.js"></script>
    <script src="../node_modules/d3-color/build/d3-color.js"></script>
    <script src="../node_modules/d3-format/build/d3-format.js"></script>
    <script src="../node_modules/d3-interpolate/build/d3-interpolate.js"></script>
    <script src="../node_modules/d3-time/build/d3-time.js"></script>
    <script src="../node_modules/d3-time-format/build/d3-time-format.js"></script>
    <script src="../node_modules/d3-scale/build/d3-scale.js"></script>
    <script src="../node_modules/d3-selection/build/d3-selection.js"></script>
    <script src="../node_modules/d3fc-data-join/build/d3fc-data-join.js"></script>
    <script src="../node_modules/d3fc-rebind/build/d3fc-rebind.js"></script>
    <script src="../node_modules/d3-path/build/d3-path.js"></script>
    <script src="../node_modules/d3fc-shape/build/d3fc-shape.js"></script>
    <script src="../node_modules/d3fc-series/build/d3fc-series.js"></script>
    <script src="../build/d3fc-annotation.js"></script>

    <script>
      const xScale = d3.scaleLinear()
        .range([0, 600]);
      const line = fc.annotationBand()
        .xScale(xScale)
        .fromValue((d, i, a) => d - (i + 1) * 20)
        .toValue(d => d);
      const data = [100, 200, 300, 400];
      const wavify = (d, i, a) =>
        d * Math.abs(Math.sin((i + 1) * Date.now() / 1e4 + i * Math.PI / a.length)) + 80;
      const render = () => {
        d3.select('svg')
          .datum(data.map(wavify))
          .call(line);
        requestAnimationFrame(render);
      };
      render();
    </script>
  </body>
</html>
